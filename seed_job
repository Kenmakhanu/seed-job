job('Staging_job') {
   description('This is deployment to staging environment')
  
  scm {
        github('Kenmakhanu/maven-web-app', 'master')
   
    }
  
  logRotator {
        daysToKeep(5)
        numToKeep(5)
        artifactNumToKeep(5)
    }
  steps {
    
        maven {
            mavenInstallation('Maven 3.6.3') 
            goals('clean')
            goals('install')
            properties(skipTests: true) 
        }
    }
  
  publishers {
        archiveArtifacts {
            pattern('**/*.war')
            onlyIfSuccessful()
        }
    }
}

job('Production_job') {
   description('This is deployment to production environment')
  
  scm {
        github('Kenmakhanu/maven-web-app', 'master')
    }
  
  logRotator {
        daysToKeep(5)
        numToKeep(5)
        artifactNumToKeep(5)
    }
  steps {
    
        maven {
            mavenInstallation('Maven 3.6.3')  
            goals('clean')
            goals('install')
            properties(skipTests: true)           
        }
    }
  publishers {
        archiveArtifacts {
            pattern('**/*.war')
            onlyIfSuccessful()
        }
    }
}

job('First-Maven-Project') {
    description("First Maven job generated by the DSL on ${new Date()}, the project is a small Maven project hosted on github")
    scm {
        github('Kenmakhanu/maven-web-app', 'master')
    }
    triggers {
        scm('* * * * *')
    }
    steps {
        maven {
              mavenInstallation('Maven 3.6.3')
              goals('clean') 
              goals('package')
        }
    }
    publishers {
        archiveArtifacts {
            pattern('**/*.war')
            onlyIfSuccessful()
    }
}
}
